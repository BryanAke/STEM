<!DOCTYPE html>

<html>
<head>
  <title>app.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="proposals.html">
                proposals.js
              </a>
            
              
              <a class="source" href="featured.html">
                featured.js
              </a>
            
              
              <a class="source" href="style-helpers.html">
                style-helpers.js
              </a>
            
              
              <a class="source" href="index.html">
                index.js
              </a>
            
              
              <a class="source" href="main.html">
                main.js
              </a>
            
              
              <a class="source" href="proposal.html">
                proposal.js
              </a>
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="proposalAsFeaturedDetailsItem.html">
                proposalAsFeaturedDetailsItem.js
              </a>
            
              
              <a class="source" href="proposalAsHighlight.html">
                proposalAsHighlight.js
              </a>
            
              
              <a class="source" href="proposalsAsFeaturedDetails.html">
                proposalsAsFeaturedDetails.js
              </a>
            
              
              <a class="source" href="proposalsAsHighlights.html">
                proposalsAsHighlights.js
              </a>
            
              
              <a class="source" href="teachers.html">
                teachers.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>app.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*global window, Stem, _, Backbone, $*/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>The parent component for the entire application
is the <code>app</code> router. (It’s the only router used,
and it’s pretty simple at that.)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
Stem.Routers = Stem.Routers || {};

(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
<span class="hljs-pi">    'use strict'</span>;

    Stem.Routers.App = Backbone.Router.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>The STEM application is about the simplest
possible single page app. Each “page” is
bootstrapped as a <code>&lt;section&gt;</code> in the
<code>index.html</code> file, so the only routes we
need are routes corresponding to the
various sections.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        routes: {
            <span class="hljs-string">''</span>:         <span class="hljs-string">'landing'</span>,
            <span class="hljs-string">'teachers'</span>: <span class="hljs-string">'teachers'</span>,
            <span class="hljs-string">'schools'</span>:  <span class="hljs-string">'schools'</span>,
            <span class="hljs-string">'industry'</span>: <span class="hljs-string">'industry'</span>
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>We use a convenience function to
switch to a specific section. It’s
parameter is the <code>id</code> of the
destination section.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
        loadPage: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(id)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>For now, to “switch” pages, all we do
is set the <code>show</code> or <code>hide</code> classes on
the sections as appropriate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            $(<span class="hljs-string">'section'</span>).not(<span class="hljs-string">'#'</span> + id + <span class="hljs-string">'_page'</span>).removeClass(<span class="hljs-string">'show'</span>).addClass(<span class="hljs-string">'hide'</span>);
            $(<span class="hljs-string">'section#'</span> + id + <span class="hljs-string">'_page'</span>).removeClass(<span class="hljs-string">'hide'</span>).addClass(<span class="hljs-string">'show'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>We also want to update the navigation
bar with a theme appropriate to the
page. To do that, we set the appropriate
<code>data-</code> attribute.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            $(<span class="hljs-string">'.header'</span>).attr(<span class="hljs-string">'data-section'</span>, id);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>CLose the navigation menu (in case it was
used to trigger the page change).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            $(<span class="hljs-string">'#nav-toggle'</span>).prop(<span class="hljs-string">'checked'</span>, <span class="hljs-number">0</span>);
            $(<span class="hljs-string">'main'</span>).attr(<span class="hljs-string">'data-nav-expanded'</span>, <span class="hljs-literal">false</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>And finally, set the scroll position to
the top of the new “page”.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            _.defer(<span class="hljs-built_in">window</span>.scrollTo, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

        },

        landing: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">this</span>.loadPage(<span class="hljs-string">'landing'</span>);
        },

        teachers: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">this</span>.loadPage(<span class="hljs-string">'teachers'</span>);
        },

        schools: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">this</span>.loadPage(<span class="hljs-string">'schools'</span>);
        },

        industry: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">this</span>.loadPage(<span class="hljs-string">'industry'</span>);
        },

        initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Since JavaScript is (obviously) up
and running, we don’t have to rely
on boilerplate static HTML for
navigation within the app. To
prevent the browser from trying to
adjust scroll positions, replace
the existing <code>id</code> values with new
ones that won’t match any URL
hashtag.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            $(<span class="hljs-string">'section'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
                <span class="hljs-keyword">var</span> oldId = $(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">'id'</span>);
                $(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">'id'</span>, oldId + <span class="hljs-string">'_page'</span>);
            });

            Backbone.history.start();</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Now create and render the views for
each section. It’s okay to render
them now because they’ll remain
hidden until the user navigates
to them.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
            <span class="hljs-keyword">this</span>.teacher = <span class="hljs-keyword">new</span> Stem.Views.Teachers().render();
        }
    });

})();</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
