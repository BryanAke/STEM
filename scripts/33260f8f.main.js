window.Stem={Collections:{},Models:{},Routers:{},Views:{},config:{donorsChooseApiKey:"DONORSCHOOSE"},init:function(){"use strict";new Stem.Routers.App}},$(document).ready(function(){"use strict";Stem.init()}),this.JST=this.JST||{},this.JST["app/scripts/templates/proposalAsFeaturedDetailsItem.ejs"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=(_.escape,Array.prototype.join);with(obj)__p+='<div class="featured__details__image">\n    <img src="'+(null==(__t=thumbImageURL)?"":__t)+'" width="100" height="100"/>\n</div>\n<div class="featured__details__text">\n    <h4 class="featured__details__title">'+(null==(__t=title)?"":__t)+"</h4>\n    <p>"+(null==(__t=shortDescription)?"":__t)+'</p>\n    <p>\n        <a href="'+(null==(__t=proposalURL)?"":__t)+'" class="button button--link">\n            $',print(Math.round(+totalPrice)),__p+=" funded\n        </a>\n    </p>\n</div>\n";return __p},this.JST["app/scripts/templates/proposalAsHighlight.ejs"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=(_.escape,Array.prototype.join);with(obj)__p+='<div class="img-highlight"><img src="'+(null==(__t=imageURL)?"":__t)+'"></div>\n<h4>'+(null==(__t=title)?"":__t)+"</h4>\n<p>"+(null==(__t=shortDescription)?"":__t)+"</p>\n<p>"+(null==(__t=fulfillmentTrailer)?"":__t)+'</p>\n<div class="well well-sm">\nTotal cost: $',print(Math.round(+totalPrice)),__p+=" / $",print(Math.round(+costToComplete)),__p+=" to go <br/>\n"+(null==(__t=schoolName)?"":__t)+"<br/>\n",povertyLevel&&print("("+povertyLevel+")<br/>"),__p+="\n"+(null==(__t=city)?"":__t)+", GA\n</div>\n<p><a href="+(null==(__t=proposalURL)?"":__t)+'">Give to this class Â»</a></p>';return __p},this.JST["app/scripts/templates/proposalsAsFeaturedDetails.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h3 class="featured__details__heading">Successful Projects in Georgia</h3>\n';return __p},this.JST["app/scripts/templates/proposalsAsHighlights.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="\n";return __p},this.JST["app/scripts/templates/teachers.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+="<p>Your content here.</p>\n\n";return __p},$(document).ready(function(){"use strict";$("#nav-toggle").on("change",function(){$("main").attr("data-nav-expanded",$("#nav-toggle").prop("checked"))})}),function(a){"use strict";function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="featured",d={};a.extend(b.prototype,{init:function(){var b=a(this.element).hasClass("featured")?a(this.element):a(this.element).find(".featured");b.find("[data-featured-toggle]").on("click",function(){var c=a(this).attr("data-featured-toggle");return"0"===b.attr("data-featured-selection")&&b.find('[data-featured-details="'+c+'"]').each(function(){var b=a(this).outerHeight();a(this).css("height",0).animate({height:b},400,function(){a(this).css("height","auto")})}),b.attr("data-featured-selection",c),!1}),b.find("[data-featured-close]").on("click",function(){var c=a(this).parents("[data-featured-details]").attr("data-featured-details");return b.find('[data-featured-details="'+c+'"]').animate({height:"0"},400,function(){a(this).css("height","auto"),b.attr("data-featured-selection","0")}),!1})}}),a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})},a(".featured").featured()}(jQuery,window,document),Stem.Models=Stem.Models||{},function(){"use strict";Stem.Models.Proposal=Backbone.Model.extend({sync:function(a,b,c){if("read"!==a)throw"Attempt to write read-only Proposal model";return c.dataType="jsonp",Backbone.sync(a,b,c)},url:function(){return"http://api.donorschoose.org/common/json_feed.html?APIKey="+Stem.config.donorsChooseApiKey+"&id="+this.get("id")},initialize:function(){},defaults:{},validate:function(a){return _(a.title).isString()?_(a.thumbImageURL).isString()?_(a.imageURL).isString()?_(a.shortDescription).isString()?_(a.schoolName).isString()?_(a.city).isString()?_(a.fulfillmentTrailer).isString()?_(a.proposalURL).isString()?_(a.povertyLevel).isString()?_(a.totalPrice).isString()?_(a.costToComplete).isString()?_(a.gradeLevel).isObject()&&_(a.gradeLevel.id).isString()?"5"===a.gradeLevel.id?"Proposal is for adult education":void 0:"Proposal doesn't have a valid grade level":"Proposal doesn't have a valid cost to complete":"Proposal doesn't have a valid total price":"Proposal doesn't have a valid poverty level":"Proposal doesn't have a valid proposal URL":"Proposal doesn't have a valid fulfillment trailer":"Proposal doesn't have a valid city":"Proposal doesn't have a valid school":"Proposal doesn't have a valid description":"Proposal doesn't have a valid image":"Proposal doesn't have a valid thumbnail image":"Proposal doesn't have a valid title"},parse:function(a){return a.proposals&&_(a.proposals).isArray()?a.proposals[0]:a}})}(),Stem.Collections=Stem.Collections||{},function(){"use strict";Stem.Collections.Proposals=Backbone.Collection.extend({model:Stem.Models.Proposal,initialize:function(a,b){var c=b||{};this.options={};var d={"Health & Life Science":"4","Applied Science":"6","Environmental Science":"7",Mathematics:"8"};this.options.subject=c.subject&&d[c.subject]?d[c.subject]:"-4";var e={primary:"1",elementary:"2",middle:"3",high:"4",adult:"5"};c.grade&&e[c.grade]&&(this.options.grade=e[c.grade]);var f={urgency:"0",poverty:"1",cost:"2",popularity:"4",expiration:"5",newest:"7"};c.sortBy&&f[c.sortBy]&&(this.options.sortBy=f[c.sortBy]),this.options.maxSize=c.maxSize,this.options.keywords=c.keywords,this.options.historical=c.historical},sync:function(a,b,c){if("read"!==a)throw"Attempt to write read-only Proposals collection";return c.dataType="jsonp",Backbone.sync(a,b,c)},url:function(){return"http://api.donorschoose.org/common/json_feed.html?APIKey="+Stem.config.donorsChooseApiKey+"&state=GA&subject4="+this.options.subject+(this.options.grade?"&gradeType="+this.options.grade:"")+(this.options.keywords?'&keywords="'+encodeURIComponent(this.options.keywords)+'"':"")+(this.options.maxSize?"&max="+this.options.maxSize:"")+(this.options.historical?"&historical=true":"")+(this.options.sortBy?"&sortBy="+this.options.sortBy:"")},fetch:function(a){return Backbone.Collection.prototype.fetch.call(this,_({}).extend(a,{validate:!0}))},parse:function(a){return a.proposals}})}(),Stem.Views=Stem.Views||{},function(){"use strict";Stem.Views.ProposalAsHighlight=Backbone.View.extend({template:JST["app/scripts/templates/proposalAsHighlight.ejs"],tagName:"div",id:"",className:"",events:{},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}(),Stem.Views=Stem.Views||{},function(){"use strict";Stem.Views.ProposalsAsHighlights=Backbone.View.extend({template:JST["app/scripts/templates/proposalsAsHighlights.ejs"],tagName:"div",id:"",className:"container",events:{},initialize:function(){this.listenTo(this.collection,"reset",this.render)},render:function(){return this.$el.html(this.template()),this.collection.each(function(a,b){b%4===0&&$("<div>").addClass("row").appendTo(this.$el);var c=new Stem.Views.ProposalAsHighlight({model:a,el:$("<div>").addClass("col-sm-3").get(0)}).render();this.$(".row").last().append(c.el)},this),this}})}(),Stem.Routers=Stem.Routers||{},function(){"use strict";Stem.Routers.App=Backbone.Router.extend({routes:{"":"landing",teachers:"teachers",schools:"schools",industry:"industry"},loadPage:function(a){$("section").not("#"+a+"_page").removeClass("show").addClass("hide"),$("section#"+a+"_page").removeClass("hide").addClass("show"),$(".header").attr("data-section",a),$("#nav-toggle").prop("checked",0),$("main").attr("data-nav-expanded",!1),_.defer(window.scrollTo,0,0)},landing:function(){this.loadPage("landing")},teachers:function(){this.loadPage("teachers")},schools:function(){this.loadPage("schools")},industry:function(){this.loadPage("industry")},initialize:function(){$("section").each(function(){var a=$(this).attr("id");$(this).attr("id",a+"_page")}),Backbone.history.start(),this.teacher=(new Stem.Views.Teachers).render()}})}(),Stem.Views=Stem.Views||{},function(){"use strict";Stem.Views.Teachers=Backbone.View.extend({template:JST["app/scripts/templates/teachers.ejs"],tagName:"div",id:"",className:"",events:{},initialize:function(){this.proposals=new Stem.Collections.Proposals([],{historical:!0,maxSize:5}),this.proposals.fetch({reset:!0})},render:function(){var a=new Stem.Views.ProposalsAsFeaturedDetails({collection:this.proposals,el:$("#proposals-details")[0]});a.render()}})}(),Stem.Views=Stem.Views||{},function(){"use strict";Stem.Views.ProposalAsFeaturedDetailsItem=Backbone.View.extend({template:JST["app/scripts/templates/proposalAsFeaturedDetailsItem.ejs"],tagName:"div",id:"",className:"featured__details__item",events:{},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}(),Stem.Views=Stem.Views||{},function(){"use strict";Stem.Views.ProposalsAsFeaturedDetails=Backbone.View.extend({template:JST["app/scripts/templates/proposalsAsFeaturedDetails.ejs"],tagName:"div",id:"",className:"",events:{},initialize:function(){this.listenTo(this.collection,"reset",this.render)},render:function(){var a=this.$el;a.html(this.template()),this.collection.each(function(b){var c=new Stem.Views.ProposalAsFeaturedDetailsItem({model:b});c.render(),a.append(c.el)})}})}();